<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Play Taboo</title>
    
    <link rel="stylesheet" href="game.css">

</head>
<body>
    <a class="home" href="index.html" title="This will send you to the home page!">Taboo</a>
    <div class="container">
        <div class="team1">
                <div class="name"><h2 id="team1">Team name 1</h2></div>
                <br>
                <div class="card">
                  <h3 class="points">Total points: <span id="pts1">0</span></h3>
                  <h3 id="p1a">p1 <span></span></h3>
                  <h3 id="p2a">p2 <span></span></h3>
                  <h3 id="p3a">p3 <span></span></h3>
                  <h3 id="p4a">p4 <span></span></h3>
                </div>
        </div>
        <div class="main">
                <h2>Timer: <span id="time">60</span></h1>
                <h3 class="turn" >It's <span id="team-turn">Team 1</span> turn to play!</h3>
                <h3 class="skips">Skips used: <span id="skips">0</span></h3>
                <div class="card">
                    <div class="word" id="guess"><h2>???</h2></div>
                    <h3 id="b1">? <span></span></h3>
                    <h3 id="b2">? <span></span></h3>
                    <h3 id="b3">? <span></span></h3>
                    <h3 id="b4">? <span></span></h3>
                    <h3 id="b5">? <span></span></h3>
                </div>
        </div>
        <div class="team2" >
            <div class="name"><h2 id="team2">Team name 2</h2></div>
            <br>
            <div class="card">
              <h3 class="points">Total points: <span id="pts2">0</span></h3>
              <h3 id="p1b">p1 <span></span></h3>
              <h3 id="p2b">p2 <span></span></h3 >
              <h3 id="p3b">p3 <span></span></h3>
              <h3 id="p4b">p4 <span></span></h3>
            </div>
        </div>
    </div>
    <div class="buttons">
            <button class="pass" id="pass" onclick="passCard()">Pass</button>
            <button class="start" id="start" onclick="setTimer()">Start</button>
            <button class="taboo" id="taboo" onclick="Taboo()">Taboo</button>
            <button class="next" id="next" onclick="nextCard()">Next</button>
    </div>
</body>
<script>
let index;
let running = false;
let count=151;
let team_turn = 3;
let team_playing=0;
const data = JSON.parse(localStorage.getItem('gameData'));
const team1 = data.team1.name || "Team 1";
const team2 = data.team2.name || "Team 2";
document.getElementById("team1").textContent=team1;
document.getElementById("team2").textContent=team2;
const span = document.getElementById("team-turn");
const skips_span = document.getElementById("skips");

span.textContent = team1

const time = document.getElementById('time');
const pts_t1 = document.getElementById('pts1');
const pts_t2 = document.getElementById('pts2');

const pass = document.getElementById("pass");
const start = document.getElementById("start");
const taboo = document.getElementById("taboo");
const next = document.getElementById("next");

const p1a = document.getElementById("p1a");
const p2a = document.getElementById("p2a");
const p3a = document.getElementById("p3a");
const p4a = document.getElementById("p4a");

const p1b = document.getElementById("p1b");
const p2b = document.getElementById("p2b");
const p3b = document.getElementById("p3b");
const p4b = document.getElementById("p4b");

p1a.textContent = data.team1.players[0];
p2a.textContent = data.team1.players[1];
p3a.textContent = data.team1.players[2];
p4a.textContent = data.team1.players[3];

p1b.textContent = data.team2.players[0];
p2b.textContent = data.team2.players[1];
p3b.textContent = data.team2.players[2];
p4b.textContent = data.team2.players[3];

pass.disabled = true;
pass.style.opacity = 0.5;
taboo.disabled = true;
taboo.style.opacity = 0.5;
next.disabled = true;
next.style.opacity = 0.5;

const wordCard = {
        item: {
            main: document.getElementById('guess'),
            banned: [
            document.getElementById('b1'),
            document.getElementById('b2'),
            document.getElementById('b3'),
            document.getElementById('b4'),
            document.getElementById('b5')
            ],
        }
      }

const words = ["Παράθυρο", "Βαλίτσα","Θάλασσα","Ποδήλατο",
              "Πυροσβέστης","Τηλέφωνο","Καφές","Νοσοκομείο",
              "Ποδόσφαιρο","Βιβλίο","Τρένο","Σοκολάτα","Βουνό",
              "Αεροπλάνο","Κουζίνα","Κιθάρα","Λάμπα","Δάσος",
              "Τρέξιμο","Πίτσα","Ρολόι","Καράβι","Μήλο","Κάμερα",
              "Παγωτό","Υπολογιστής","Τσάντα","Φούρνος","Σπίτι",
              "Σχολείο","Αυτοκίνητο","Καρέκλα","Ήλιος","Μολύβι",
              "Γάτα","Τηλεόραση","Νερό","Πορτοκάλι","Παπούτσια",
              "Κρεβάτι","Πλυντήριο","Ποτήρι","Κλειδί","Σκυλί",
              "Μουσική","Ποτάμι","Καπέλο","Λεωφορείο","Μπάλα",
              "Ανεμιστήρας","Μαγιό","ήλιος","φεγγάρι","αστέρι","σύννεφο","βροχή",
              "θάλασσα","νησί","ποτάμι","λίμνη","βουνό",
              "δέντρο","δάσος","λουλούδι","γρασίδι","φύση",
              "σπίτι","διαμέρισμα","κουζίνα","μπάνιο","σαλόνι",
              "καρέκλα","τραπέζι","καναπές","πόρτα","παράθυρο",
              "τηλέφωνο","υπολογιστής","πληκτρολόγιο","ποντίκι","οθόνη",
              "αυτοκίνητο","λεωφορείο","ποδήλατο","μηχανή","τρένο",
              "αεροπλάνο","πλοίο","ταξί","πατίνι","τροχόσπιτο",
              "γάτα","σκύλος","πουλί","ψάρι","άλογο",
              "μπάλα","ράκετα","τερματοφύλακας","δίχτυ","γύρος",
              "βιβλίο","τετράδιο","στυλό","μολύβι","γόμα",
              "τσάντα","πορτοφόλι","κλειδί","ρολόι","γυαλιά",
              "ψωμί","γάλα","τυρί","κρέας","μακαρόνια",
              "παγωτό","σοκολάτα","πίτσα","σάντουιτς","μήλο",
              "μπανάνα","πορτοκάλι","σταφύλι","καρότο","πατάτα",
              "φως","σκοτάδι","σκιά","λάμπα","κερί",
              "ήχος","σιωπή","μουσική","κιθάρα","τύμπανο",
              "χάρτης","πλανήτης","χώρα","πόλη","χωριό",
              "σχολείο","μαθητής","δασκάλα","τάξη","διάλειμμα"];

const banned_words = [["τζάμι", "σπίτι", "κουρτίνα", "άνοιγμα", "θέα"],
                      ["ταξίδι","αεροδρόμιο", "ρούχα", "χειραποσκευή", "τροχός"],
                      ["νερό", "κύμα", "παραλία", "καλοκαίρι", "μπλε"],
                      ["τροχοί", "πετάλια", "δίτροχο", "κράνος", "ποδηλάτης"],
                      ["φωτιά", "νερό", "σωλήνας", "στολή", "πυροσβεστική"],
                      ["κλήση", "κινητο", "μήνυμα", "κουδούνισμα", "αριθμός"],
                      ["κούπα", "καφεΐνη", "ζεστό", "ρόφημα", "φίλτρο"],
                      ["γιατρός", "ασθενής", "χειρουργείο", "κρεβάτι", "νοσηλευτής"],
                      ["μπάλα", "γκολ", "γήπεδο", "παίκτες", "διαιτητής"],
                      ["σελίδες", "συγγραφέας", "ανάγνωση", "ιστορία", "εξώφυλλο"],
                      ["ράγες", "σταθμός", "βαγόνι", "μηχανοδηγός", "ταξίδι"],
                      ["γλυκό", "κακάο", "μαύρη", "γάλα", "λιωμένη"],
                      ["κορυφή", "ανάβαση", "χιονισμένο", "ύψος", "μονοπάτι"],
                      ["πτήση", "πιλότος", "αεροδρόμιο", "φτερά", "ταξίδι"],
                      ["μαγείρεμα", "φούρνος", "πιάτα", "φαγητό", "ντουλάπια"],
                      ["χορδές", "μουσική", "παίζω", "ηλεκτρική", "ήχος"],
                      ["φως", "ηλεκτρικό", "σκοτάδι", "καλώδιο", "ανάβω"],
                      ["δέντρα", "φύση", "μονοπάτι", "ζώα", "σκιά"],
                      ["άσκηση", "πόδια", "δρομέας", "ταχύτητα", "κούρσα"],
                      ["τυρί", "ζύμη", "σάλτσα", "κομμάτι", "φούρνος"],
                      ["ώρα", "λεπτά", "χέρι", "τοίχος", "χρόνος"],
                      ["θάλασσα", "πλοίο", "ταξίδι", "καπετάνιος", "λιμάνι"],
                      ["φρούτο", "κόκκινο", "δέντρο", "γλυκό", "φαγητό"],
                      ["φωτογραφία", "φακός", "βίντεο", "λήψη", "φλας"],
                      ["κρύο", "γλυκό", "μπάλα", "γεύση", "κωνάκι"],
                      ["οθόνη", "πληκτρολόγιο", "ποντίκι", "πρόγραμμα", "ίντερνετ"],
                      ["ώμος", "πλάτη", "θήκες", "μεταφέρω", "αντικείμενα"],
                      ["ψήνω", "κουζίνα", "φαγητό", "θερμότητα", "ηλεκτρικός"],
                      ["δωμάτια", "οικογένεια", "πόρτα", "παράθυρα", "στέγη"],
                      ["μαθητές", "δασκάλα", "τάξη", "μάθημα", "διάλειμμα"],
                      ["τροχοί", "οδηγός", "μηχανή", "ταχύτητα", "βενζίνη"],
                      ["κάθομαι", "πόδια", "έπιπλο", "τραπέζι", "πλάτη"],
                      ["φως", "ζέστη", "ουρανός", "καλοκαίρι", "ακτίνες"],
                      ["γράψιμο", "σβήστρα", "ξυλομπογιά", "χαρτί", "μύτη"],
                      ["ζώο", "χάδι", "ουρά", "νιαούρισμα", "τρίχα"],
                      ["οθόνη", "κανάλια", "τηλεκοντρόλ", "ταινίες", "ήχος"],
                      ["ποτό", "υγρό", "βρύση", "θάλασσα", "κρύο"],
                      ["φρούτο", "χυμός", "πορτοκαλί", "φλούδα", "βιταμίνη"],
                      ["πόδια", "δετά", "βάδισμα", "αθλητικά", "ζευγάρι"],
                      ["ύπνος", "στρώμα", "μαξιλάρι", "κουβέρτα", "υπνοδωμάτιο"],
                      ["ρούχα", "νερό", "καθαρισμό", "πρόγραμμα", "στροβιλισμός"],
                      ["νερό", "πίνω", "γυαλί", "ποτό", "κουζίνα"],
                      ["πόρτα", "κλειδώνω", "μεταλλικό", "σπίτι", "κλειδαριά"],
                      ["ζώο", "ουρά", "γαβγίζω", "λουρί", "χάδι"],
                      ["ακούω", "τραγούδι", "ρυθμός", "ήχος", "όργανο"],
                      ["νερό", "ρέει", "γέφυρα", "πηγή", "λίμνη"],
                      ["κεφάλι", "ρούχο", "ήλιος", "σκιά", "φοράω"],
                      ["οδηγός", "στάση", "εισιτήριο", "μεταφορά", "όχημα"],
                      ["ποδόσφαιρο", "στρογγυλή", "ρίχνω", "παιχνίδι", "άλμα"],
                      ["αέρας", "ζέστη", "γυρίζει", "ηλεκτρικό", "δροσιά"],
                      ["θάλασσα", "παραλία", "καλοκαίρι", "ρούχο", "κολύμπι"],
                      ["φως","ζέστη","ουρανός","ακτίνες","καλοκαίρι"],
                      ["νύχτα","ουρανός","στρογγυλό","φως","αστέρια"],
                      ["νύχτα","ουρανός","λάμπει","ουράνιο","διάστημα"],
                      ["ουρανός","λευκό","καιρός","βροχή","σκιά"],
                      ["σταγόνες","σύννεφα","καιρός","νερό","ομπρέλα"],
                      ["νερό","κύμα","παραλία","βαθύ","μπλε"],
                      ["θάλασσα","παραλία","ταξίδι","νησί","χώρες"],
                      ["νερό","ρέει","γέφυρα","πηγή","ρεύμα"],
                      ["νερό","ήρεμο","φύση","βάθος","καθαρό"],
                      ["κορυφή","ύψος","ανάβαση","χιόνι","μονοπάτι"],
                      ["φύλλα","ρίζες","κορμός","πράσινο","φυτό"],
                      ["δέντρα","φύση","σκιά","μονοπάτι","ζώα"],
                      ["πέταλα","άρωμα","χρώμα","φυτό","κήπος"],
                      ["πράσινο","έδαφος","φύση","κήπος","χώμα"],
                      ["δέντρα","ζώα","κλίμα","τοπίο","ήρεμο"],
                      ["οικογένεια","πόρτα","δωμάτια","τοίχοι","σπίτι"],
                      ["πολυκατοικία","όροφος","πόρτα","χώροι","σπίτι"],
                      ["μαγείρεμα","πάγκος","φούρνος","ψυγείο","πιάτα"],
                      ["νερό","ντους","καθαριότητα","νιπτήρας","τουαλέτα"],
                      ["καναπές","τηλεόραση","χαλί","δωμάτιο","σπίτι"],
                      ["κάθομαι","πόδια","έπιπλο","γραφείο","καθιστικό"],
                      ["ξύλο","πόδια","φαγητό","έπιπλο","καθιστικό"],
                      ["καθιστικό","άνεση","καθόμαι","μαξιλάρια","σπίτι"],
                      ["κλειδί","άνοιγμα","κλειδώνω","είσοδος","μέσα"],
                      ["τζάμι","σπίτι","θέα","άνοιγμα","τοίχος"],
                      ["κλήση","αριθμός","ήχος","κινητό","επικοινωνία"],
                      ["PC","laptop","τεχνολογία","πληροφορίες","internet"],
                      ["πλήκτρα","γραμμή","γράψιμο","σύνδεση","input"],
                      ["scroll","click","χέρι","υπολογιστής","σύνδεση"],
                      ["οθόνη","εικόνα","φως","pixels","υπολογιστής"],
                      ["τροχοί","οδηγός","μηχανή","ταχύτητα","καύσιμα"],
                      ["στάση","εισιτήριο","μεταφορά","οδηγός","όχημα"],
                      ["τροχοί","φρένο","σέλα","τιμόνι","πετάλια"],
                      ["κράνος","θόρυβος","τροχοί","οδηγός","ταχύτητα"],
                      ["ράγες","σταθμός","τροχιά","μεταφορά","όχημα"],
                      ["πτήση","πιλότος","φτερά","ταξίδι","αεροδρόμιο"],
                      ["θάλασσα","καπετάνιος","λιμάνι","ταξίδι","πλοήγηση"],
                      ["μεταφορά","ταξί","οδηγός","όχημα","διαδρομή"],
                      ["τροχοί","ηλεκτρικό","ταχύτητα","παιδιά","πεζοδρόμιο"],
                      ["τροχός","σπίτι","τροχιά","ταξίδι","όχημα"],
                      ["νιαούρισμα","ζώο","ουρά","τρίχα","χάδι"],
                      ["ζώο","γαβγίζω","ουρά","λουρί","χάδι"],
                      ["φτερά","κελάηδημα","ζώο","ουρανός","φύση"],
                      ["νερό","ενυδρείο","κολυμπάει","ζώο","ουρά"],
                      ["τρέχω","ταχύτητα","πόδια","φάρμα","ζώο"],
                      ["ποδόσφαιρο","στρογγυλή","παίζω","ρίχνω","παιχνίδι"],
                      ["μπάλα","χτύπημα","γήπεδο","σπορ","παιχνίδι"],
                      ["τερμα","μπάλα","παιχνίδι","γήπεδο","πιάνει"],
                      ["μπάλα","τέρμα","παιχνίδι","δίχτυ","γήπεδο"],
                      ["αγώνας","σειρά","κινήσεις","παιχνίδι","στροφή"],
                      ["σελίδες","συγγραφέας","διάβασμα","ιστορία","εξώφυλλο"],
                      ["γράψιμο","τετράγωνο","χαρτιά","σχολείο","σημειώσεις"],
                      ["μελάνι","γραμμή","γράψιμο","χαρτί","γραφή"],
                      ["ξυστρά","χαρτί","γράφω","μύτη","εργαλείο"],
                      ["σβήνω","λάθος","μολύβι","χαρτί","σχολείο"],
                      ["ώμος","πλάτη","μεταφέρω","θήκες","σχολείο"],
                      ["χρήματα","τσέπη","κάρτες","τσαντάκι","ταυτότητα"],
                      ["πόρτα","κλειδαριά","σπίτι","ασφάλεια","άνοιγμα"],
                      ["χρόνος","λεπτά","τοίχος","χέρι","ώρα"],
                      ["μάτια","όραση","φακοί","ήλιος","πρόσωπο"],
                      ["φούρνος","ψήσιμο","αλεύρι","φαγητό","σπίτι"],
                      ["αγελάδα","λευκό","πίνω","ψυγείο","ποτό"],
                      ["γονίδιο","γάλα","φέτες","ψυγείο","ζώο"],
                      ["ψητό","φαγητό","ζουμί","βόειο","κόκκινο"],
                      ["σάλτσα","βράσιμο","φαγητό","πιάτο","ζυμαρικά"],
                      ["κρύο","γλυκό","καλοκαίρι","μπάλες","γεύση"],
                      ["γλυκό","κακάο","μαύρη","λιωμένη","γλυκίσμα"],
                      ["τυρί","ζύμη","φούρνος","κομμάτι","φαγητό"],
                      ["ψωμί","τυρί","γουρούνι","ντομάτα","γεύμα"],
                      ["κόκκινο","φρούτο","γλυκό","δέντρο","φαγητό"],
                      ["κίτρινη","φρούτο","γλυκιά","μακρύ","φλούδα"],
                      ["χυμός","πορτοκαλί","φλούδα","βιταμίνη","φρούτο"],
                      ["σταφύλι","βότρυς","φρούτο","γλυκό","κρασί"],
                      ["πορτοκαλί","ρίζα","λαχανικό","σαλάτα","υγεία"],
                      ["τηγανιτή","λαχανικό","φούρνος","φαγητό","πατάτες"],
                      ["λάμπα","ήλιος","ηλεκτρικό","φωτισμός","σπίτι"],
                      ["νύχτα","ήχος","καμία","φωνή","ηρεμία"],
                      ["ήχος","τραγούδι","ρυθμός","όργανα","ακούω"],
                      ["χορδές","ήχος","μουσική","παίζω","όργανο"],
                      ["ήχος","παίζω","ξυλόφωνο","ρυθμός","μουσική"],
                      ["χάρτης","κόσμος","γεωγραφία","χώρα","τοποθεσία"],
                      ["διάστημα","αστέρι","ήλιος","σύστημα","τροχιά"],
                      ["σημαία","έθνος","σύνορα","πολιτική","τοποθεσία"],
                      ["κτήριο","δρόμοι","πληθυσμός","κέντρο","χάρτης"],
                      ["σπίτια","μικρό","αγροτικό","ήρεμο","κάτοικοι"],
                      ["τάξη","βιβλία","μαθητές","εκπαίδευση","δασκάλα"],
                      ["σχολείο","διάλειμμα","μάθημα","τάξη","εκπαίδευση"],
                      ["μαθητής","τάξη","εκπαίδευση","σχολείο","παιδιά"],
                      ["μαθητές","πίνακας","μάθημα","εκπαίδευση","σχολείο"],
                      ["σχολείο","αυλή","φαγητό","ξεκούραση","διάσκεψη"]];

let used_words = [];

let skips = 0;
let timeLeft = 59;
let countdown;

const clickSound = new Audio("button-click.mp3");

function setTimer() {
  clickSound.currentTime = 0;
  clickSound.play();
  if(count == 151){
    index = random();
    randomCardPicker(index);
  }
  if (running == false){
    
    pass.disabled = false;
    pass.style.opacity = 1;
    taboo.disabled = false;
    taboo.style.opacity = 1;
    next.disabled = false;
    next.style.opacity = 1;

    pass.disabled = false;
    taboo.disabled = false;
    next.disabled = false;

    start.style.backgroundColor = "red";
    start.style.boxShadow = "0px 0px 3px red";
    start.textContent = "Stop";

    running = true;
    countdown = setInterval(() => {
      time.textContent = timeLeft;
      timeLeft--;

      if (timeLeft < -1) {
        clearInterval(countdown);
        window.alert("Time's out!");
        team_playing = changeTeamTurn(team_turn);
        team_turn++;
        timeLeft = 59;
        skips = 0;

        pass.disabled = true;
        pass.style.opacity = 0.5;
        taboo.disabled = true;
        taboo.style.opacity = 0.5;
        next.disabled = true;
        next.style.opacity = 0.5;
        start.style.backgroundColor = "blue";
        start.style.boxShadow = "0px 0px 3px blue";
        start.textContent = "Start";
        running = false;

      }
    }, 1000);
  }else if(running == true){

    pass.disabled = true;
    pass.style.opacity = 0.5;
    taboo.disabled = true;
    taboo.style.opacity = 0.5;
    next.disabled = true;
    next.style.opacity = 0.5;

    start.style.backgroundColor = "blue";
    start.style.boxShadow = "0px 0px 3px blue";
    start.textContent = "Start";

    running = false;
    time.textContent = timeLeft;
    clearInterval(countdown);

  }
}

function changeTeamTurn(team_turn) {
    const team1 = data.team1.name || "Team 1";
    const team2 = data.team2.name || "Team 2";
    const span = document.getElementById("team-turn");

    time.textContent = "60";
  if (team_turn % 2 === 0) {
    span.textContent = team1;
    return 0;
  } else {
    span.textContent = team2;
    return 1;
  }
}

function nextCard(){
  clickSound.currentTime = 0;
  clickSound.play();
  if(team_playing == 0){
      pts_t1.textContent = parseInt(pts_t1.textContent) + 1;
  }else{
      pts_t2.textContent = parseInt(pts_t2.textContent) + 1;
  }
  index = random();
  randomCardPicker(index);
}

function Taboo(){
  clickSound.currentTime = 0;
  clickSound.play();
  if(team_playing == 0){
      pts_t2.textContent = parseInt(pts_t2.textContent) + 1;
  }else{
      pts_t1.textContent = parseInt(pts_t1.textContent) + 1;
  }
  index = random();
  randomCardPicker(index);
}

function passCard(){
  if(skips < 2){
    clickSound.currentTime = 0;
    clickSound.play();
    index = random();
    randomCardPicker(index);
    skips++;  
    skips_span.textContent = skips;
  }else{
    window.alert("No more skips available");
  }
}


function random(){
  return Math.floor(Math.random() * count);
}

function randomCardPicker(index){
  let exist = false;
  for (i=0; i < used_words.length; i++){
      if(used_words[i] == words[index]){
        exist = true;
      }  
  }
  console.log(exist)
  if (exist == false){
    used_words.push(words[index]);
    wordCard.item.main.textContent = words[index];
    words.splice(index,1);
    for (i=0; i<5; i++){
      wordCard.item.banned[i].textContent = banned_words[index][i];
    }
    banned_words.splice(index,1);
    count--;
  }
}

</script>
</html>